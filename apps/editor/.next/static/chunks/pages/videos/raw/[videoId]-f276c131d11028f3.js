(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{9075:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/videos/raw/[videoId]",function(){return r(3369)}])},3369:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return g}});var s=r(2322),o=r(2784),a=r(5632),n=r(5546),i=r(3476),d=r(4330),u=r(2202),c=r(2382),l=r(1655),g=!0;t.default=(0,l.Z)(e=>{let{video:t,hasApplied:r}=e,[l,g]=(0,o.useState)(),[h,m]=(0,o.useState)(),p=(0,a.useRouter)(),{videoId:f}=p.query,_=(0,i.Zl)(d.Je),T=(0,i.sJ)(d.Di);return(0,o.useEffect)(()=>{f&&(t||(u.Am.error("Server Error"),p.back()),t&&(g(t),m(r)))},[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"h-screen bg-gray-100 flex justify-around items-center",children:l&&(0,s.jsx)(n.nk,{removeFromLeger:()=>{let e={videoId:l._id};(0,c.Z)({baseURL:"http://localhost:3001/api",url:"/video/removeFromLeger",method:"PUT",headers:{"Content-Type":"appliacation/json",Authorization:sessionStorage.getItem("editorToken")},data:e}).then(e=>{_(e=>e.map(e=>e.rawVideo._id===l._id?{...e,editors:e.editors.filter(e=>e._id!==T)}:e)),m(!1),u.Am.success(e.data.message)}).catch(e=>{if(e){if(e.response){u.Am.error(e.response.data.message);return}u.Am.error(e.message),console.log(e);return}})},video:l,hasApplied:h,type:"raw",addToLeger:()=>{let e={rawVideo:l._id,creator:l.creator._id};(0,c.Z)({baseURL:"http://localhost:3001/api",url:"/video/addToLeger",method:"PUT",headers:{"Content-Type":"application/json",Authorization:sessionStorage.getItem("editorToken")},data:e}).then(e=>{_(t=>[...t,e.data.leger]),m(!0),u.Am.success(e.data.message)}).catch(e=>{if(e){if(e.response){u.Am.error(e.response.data.message);return}u.Am.error(e.message),console.log(e)}})}})})})})},1655:function(e,t,r){"use strict";var s=r(2322),o=r(2382),a=r(5632),n=r(2784),i=r(2202),d=r(3542);t.Z=e=>t=>{let r=(0,a.useRouter)(),{BASEURL:u}=d.env,c=async()=>{(0,o.Z)({baseURL:u||"http://localhost:3001/api",url:"/auth/me",method:"GET",headers:{"Content-Type":"application/json",Authorization:sessionStorage.getItem("editorToken")}}).then(e=>{e.data.isValid||(i.Am.error(e.data.message),sessionStorage.clear(),r.push("/login"))}).catch(e=>{e&&!e.response.isValid&&(i.Am.error(e.response.data.message),sessionStorage.clear(),r.push("/login"))})};return(0,n.useEffect)(()=>{sessionStorage.getItem("editorToken")&&0!=sessionStorage.getItem("editorToken").length?c():(sessionStorage.clear(),r.push("/login"))},[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(e,{...t})})}}},function(e){e.O(0,[382,774,888,179],function(){return e(e.s=9075)}),_N_E=e.O()}]);